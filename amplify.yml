version: 1
applications:
  - frontend:
      phases:
        preBuild:
          commands:
            - echo "ğŸ”® Installing dependencies..."
            - npm ci
            - echo "âš—ï¸ Installing Angular CLI..."
            - npm install -g @angular/cli@latest
        build:
          commands:
            - echo "âœ¨ Building Elena's Elixirs..."
            - ng build --configuration=production
            - echo "ğŸŒŸ Build completed successfully!"
        postBuild:
          commands:
            - echo "ğŸš€ Deployment ready!"
      artifacts:
        baseDirectory: dist/elenas-elixirs/browser
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
          - .angular/cache/**/*
    appRoot: client
  - backend:
      phases:
        preBuild:
          commands:
            - echo "ğŸ§ª Setting up backend..."
            - cd backend
            - npm ci
        build:
          commands:
            - echo "ğŸ”¥ Building Lambda functions..."
            - echo "âœ… Backend build completed!"
        postBuild:
          commands:
            - echo "ğŸ¹ Backend ready to serve!"
      appRoot: backend